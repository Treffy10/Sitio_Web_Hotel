<% content_for :title, "Reservacion Nueva - Rubies" %>

<div class='container'>
    <div class='reservation_info'>
        <div class='habitacion'>
            <div class='image_bedroom'>
                <%= image_tag @category_bedroom.image, class: "image" %>
            </div>
            <div class='caracteristicas'>
                <div class='_caracteristicas'>
                    <h1><%= @category_bedroom.title %></h1>
                    <span>Entrada: <%= @fecha_entrada %> </span>
                    <span>Salida: <%= @fecha_salida %> [<%= @nights %> noche(s)]</span>
                    <span>Oferta: Tarifa Estandar</span>
                    <span>Ocupacion: <%= @ocupacion %> </span>
                </div>
            </div>    
        </div>
        <div class='total_price'>
            <div class='price'>PRECIO TOTAL</div>
            <div class='price'><%= @calculated_price %></div>
        </div>
    </div>
    <div class='formulario_huesped'>
        <div class='condiciones reservas'>
        </div>

        <div claa='guia'>
            <h2>Datos del cliente</h2>
        </div>
        <div class='subtitulo_guia'>Introduce los siguientes datos para continuar con la reserva</div>

        <div class="model">
            <%= form_with model: @reservation do |reservation_form| %>
                <!-- Campos de Resident -->
                <%= reservation_form.hidden_field :state, value: 0 %>
                <%= reservation_form.fields_for :resident do |resident_fields| %>
                    <div class="campo">
                        <%= resident_fields.label :name %>
                        <%= resident_fields.text_field :name %>
                    </div>
                    <div class="campo">
                        <%= resident_fields.label :lastnamePaternal %>
                        <%= resident_fields.text_field :lastnamePaternal %>
                    </div>
                    <div class="campo">
                        <%= resident_fields.label :lastnameMaternal %>
                        <%= resident_fields.text_field :lastnameMaternal %>
                    </div>
                    <div class="campo">
                        <%= resident_fields.label :dni %>
                        <%= resident_fields.text_field :dni %>
                    </div>
                    <div class="campo">
                        <%= resident_fields.label :phone %>
                        <%= resident_fields.text_field :phone %>
                    </div>
                    <div class="campo">
                        <%= resident_fields.label :location %>
                        <%= resident_fields.text_field :location %>
                    </div>
                    <div class="campo">
                        <%= resident_fields.label :birthday %>
                        <%= resident_fields.text_field :birthday %>
                    </div>
                    <div class="campo">
                        <%= resident_fields.label :nationality %>
                        <%= resident_fields.text_field :nationality %>
                    </div>  
                    <div class="campo">
                        <%= resident_fields.label :email %>
                        <%= resident_fields.email_field :email %>
                    </div>
                <% end %>
                <div class="acciones">
                    <!-- Formulario para enviar los datos con un botón de envío -->
                    <%= form_tag(create_reservation_path, method: "post") do %>
                        <%= hidden_field_tag :category_bedroom_id, @category_bedroom.id %>
                        <%= hidden_field_tag :fecha_entrada, @fecha_entrada %>
                        <%= hidden_field_tag :fecha_salida, @fecha_salida %>
                        <%= hidden_field_tag :pago_total, @calculated_price %>
                        <%= submit_tag "Guardar" %>
                    <% end %>
                </div>
            <% end %>
        </div>
    </div>
</div>